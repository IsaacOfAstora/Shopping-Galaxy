<!DOCTYPE html>
<html lang="en">

<head>
  <title>Cart</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../assets/Isaalogo.png" type="image/x-icon">
  <link rel="stylesheet" href="../css/IST.css">
  <link rel="stylesheet" href="../css/For_customer.css">
  <link rel="stylesheet" href="../css/fontawesome-free-6.1.1-web/css/all.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <link rel="stylesheet" href="../css/icomoon/my-Ico-moon-Icons.css" />
</head>

<body>


  <header>

    <h1 class="title">
      <span class="icon-IsaacLogo"></span>
      Shopper Galaxy
    </h1>
    <div class="nav-toggle">
      <span class="first"></span>
      <span class="second"></span>
      <span class="third"></span>
  </div>
    <!-------------------------------------------------------------------------->
    <!-------------------------Social Media Section ---------------------------->
    <!-------------------------------------------------------------------------->
    <div class="wrapper">
      <a class="social facebook" href="facebook.com">
        <i class="fab fa-facebook"></i>
        <span>Facebook</span>
      </a>
      <a class="social youtube" href="youtube.com">
        <i class="fab fa-youtube"></i>
        <span>Youtube</span>
      </a>
      <a class="social twitter" href="twitter.com">
        <i class="fab fa-twitter"></i>
        <span>Twitter</span>
      </a>
      <a class="social instagram" href="instagram.com">
        <i class="fab fa-instagram"></i>
        <span>Instagram</span>
      </a>
      <a class="social github" href="github.com">
        <i class="fab fa-github"></i>
        <span>Github</span>
      </a>
      <div class="social discord">
        <i class="fab fa-discord"></i>
        <span>Discord</span>
        <label class="discord-id">Isaac Star-Wolf#8986</label>
      </div>
    </div>

    <!-------------------------------------------------------------------------->
    <!-----------------------Social Media Section End -------------------------->
    <!-------------------------------------------------------------------------->
  </header>
  </div>
  <nav>
    <a class="homePage" href="../index.html"><i class="fa-solid fa-user-plus"></i></a>
    <a class="nav-item" href="Main.html"><i class="fa-solid fa-house-chimney"></i>Main</a>

    <label class="button">
      <span>Products <i class="fas fa-caret-up"></i></span>
      <ul class="menu">
        <li><a class="menu-item" href="phones.html"><i class="fa-solid fa-mobile-button"></i>Phones</a></li>
        <li><a class="menu-item" href="Accessories.html"></i><i class="fa-solid fa-headphones"></i>Accessories</a></li>
        <li><a class="menu-item" href="perfumes.html"><i class="icon-cosmetic_icon"></i>cosmetics</a></a></li>
      </ul>
    </label>
    <a class="current-nav-item" href="For_customer.html"><i class="fa-solid fa-cart-flatbed"></i>Cart</a>
    <a class="nav-item" href="aboutUs.html"><i class="fa-solid fa-address-card"></i>About us</a>
    <div class="search-bar">
      <span class="search-icon"><i class="fa fa-search" aria-hidden="true"></i></span>
      <input type="text" class="search-input" placeholder="search your product"></input>
      <span class="search-bar-remover"><i class="fa-solid fa-xmark"></i></span>
    </div>

  </nav>




  <!--////////////////////////////////isaac Cart////////////////////////////////-->
  <section class="cartColumn">
    <div class="cart">
      <div class="cartTitles">
        <span>Product</span>
        <span>Amount</span>
        <span>Price</span>
      </div>
      <div class="cartItems"></div>
      
      <div class="cartTotal">
        <div class="cartTotal-Titles">
          <span>In cart</span>
          <span>Total price</span>
        </div>
        <div class="cartTotal-Item">
          <span class="total">0</span>
          <span class="price">0 DA</span>
        </div>
      </div>
  </section>
  <!--////////////////////////////////Total price Table End////////////////////////////////-->
  <!--////////////////////////////////Isaac Cart End////////////////////////////////-->



  <!-------------------------------------------------------------------------->
  <!-------------------------Footer  Section --------------------------------->
  <!-------------------------------------------------------------------------->
  <footer>
    <article class="first">
      <span class="icon-IsaacLogo"></span>
      <a href="./aboutUs.html">About us</a>
    </article>
    <!---->
    <!---->
    <!---->
    <article class="middle">
      <span class="paragraph">
        <p>© Designed in 2022 by Isaac</p>
        <p>© all rights reserved</p>
      </span>
      <div class="footer-wrapper">
        <a class="icon facebook" href="https://www.facebook.com/isaac.Rodin.00/" target="blank">
          <i class="fab fa-facebook-f"></i>
        </a>
        <a class="icon twitter" href="https://twitter.com/0xc0000007b" target="blank">
          <i class="fab fa-twitter"></i>
        </a>
        <a class="icon instagram" href="https://www.instagram.com/dionysus_00q/" target="blank">
          <i class="fab fa-instagram"></i>
        </a>
        <a class="icon github" href="https://github.com/IsaacOfAstora" target="blank">
          <i class="fab fa-github"></i>
        </a>
        <a class="icon youtube" href="https://www.youtube.com/channel/UCOpVKDJZ-OPvxw7po3fBwww" target="blank">
          <i class="fab fa-youtube"></i>
        </a>
    </article>
    <!---->
    <!---->
    <!---->
    <article class="end">
      <button class="goUp" type="button"><i class="fa-solid fa-arrow-up-from-ground-water"></i></button>
    </article>
  </footer>
  <!-------------------------------------------------------------------------->
  <!-------------------------Footer  Section End ----------------------------->
  <!-------------------------------------------------------------------------->

  <script src="../js/main.js"></script>
  <script src="../js/for_custumer.js"></script>
  <script src="../js/burger-menu.js"></script>
  <script>
  // cart-display.js
function loadCart() {
  const cartItemsContainer = document.querySelector('.cartItems');
  cartItemsContainer.innerHTML = ''; // Clear the existing cart display

  // Get cart from localStorage or use an empty array if it doesn't exist
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  let totalQuantity = 0;
  let totalPrice = 0;

  cart.forEach(item => {
    if (item.quantity > 0) { // Only display items with quantity greater than 0
      const cartItem = document.createElement('div');
      cartItem.classList.add('cartItem');

      cartItem.innerHTML = `
        <button type="button" class="cartRemover" data-id="${item.id}">
          <i class="fa-solid fa-trash"></i>
        </button>
        <div class="cartItem-info">
          <img class="cartItem-image" src="${item.image}" alt="${item.name}" />
          <span>${item.name}</span>
        </div>
        <input type="number" class="amount" value="${item.quantity}" min="1" data-id="${item.id}" />
        <span class="totalPrice">${(item.price * item.quantity).toFixed(2)} DA</span>
      `;

      totalQuantity += item.quantity;
      totalPrice += item.price * item.quantity;
      cartItemsContainer.appendChild(cartItem);
    }
  });

  document.querySelector('.cartTotal .total').textContent = totalQuantity;
  document.querySelector('.cartTotal .price').textContent = `${totalPrice.toFixed(2)} DA`;

  addCartEventListeners();
}

function addCartEventListeners() {
  document.querySelectorAll('.cartRemover').forEach(button => {
    button.addEventListener('click', (e) => {
      const itemId = e.target.closest('.cartRemover').dataset.id;
      removeItemFromCart(itemId);
      loadCart(); // Reload the cart after removal
    });
  });

  document.querySelectorAll('.amount').forEach(input => {
    input.addEventListener('change', (e) => {
      const itemId = e.target.dataset.id;
      const newQuantity = parseInt(e.target.value, 10);
      updateItemQuantity(itemId, newQuantity);
      loadCart(); // Reload the cart after updating quantity
    });
  });
}

function removeItemFromCart(id) {
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  cart = cart.filter(item => item.id !== id);
  localStorage.setItem('cart', JSON.stringify(cart));
}

function updateItemQuantity(id, quantity) {
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  const itemIndex = cart.findIndex(item => item.id === id);
  if (itemIndex !== -1) {
    cart[itemIndex].quantity = quantity;
    if (cart[itemIndex].quantity <= 0) {
      cart.splice(itemIndex, 1); // Remove item if quantity is 0 or less
    }
    localStorage.setItem('cart', JSON.stringify(cart));
  }
}

// Initial load of the cart
document.addEventListener('DOMContentLoaded', loadCart);


</script>

</body>

</html>